<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ponzi Architect</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            overflow: hidden;
            position: relative;
        }

        html {
            height: 100%;
        }

        .container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* Professional background pattern */
        .background-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 25% 25%, rgba(255,255,255,0.02) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255,255,255,0.02) 0%, transparent 50%);
            z-index: 1;
        }

        /* Header with navigation */
        .header {
            position: relative;
            z-index: 10;
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
        }

        .title {
            color: #ffffff;
            font-size: 28px;
            font-weight: 300;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        .header-buttons {
            display: flex;
            gap: 15px;
        }

        .header-btn {
            background: linear-gradient(135deg, #3f51b5 0%, #5c6bc0 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            font-family: 'Segoe UI', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .header-btn:hover {
            background: linear-gradient(135deg, #5c6bc0 0%, #7986cb 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .nav-tabs {
            display: flex;
            background: rgba(0,0,0,0.1);
            padding: 0 30px;
        }

        .nav-tab {
            padding: 15px 25px;
            color: rgba(255,255,255,0.7);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-tab:hover, .nav-tab.active {
            color: #ffffff;
            border-bottom-color: #64b5f6;
            background: rgba(255,255,255,0.05);
        }

        /* Main dashboard layout */
        .dashboard-layout {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
            padding: 20px 30px;
            position: relative;
            z-index: 5;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .kpi-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border-color: rgba(100,181,246,0.5);
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #64b5f6, #42a5f5);
        }

        .kpi-label {
            color: rgba(255,255,255,0.8);
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .kpi-value {
            color: #ffffff;
            font-size: 28px;
            font-weight: 300;
            margin-bottom: 5px;
        }

        .kpi-change {
            font-size: 12px;
            font-weight: 500;
        }

        .kpi-change.positive {
            color: #4caf50;
        }

        .kpi-change.negative {
            color: #f44336;
        }

        /* Animated progress bars */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #64b5f6, #42a5f5);
            transition: width 0.8s ease;
        }

        /* Professional Pyramid Visualization */
        .pyramid-panel {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        .pyramid-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #64b5f6, #42a5f5);
        }

        .pyramid-title {
            color: #ffffff;
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pyramid-container {
            position: relative;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding: 20px;
        }

        .pyramid-level {
            display: flex;
            gap: 4px;
            margin-bottom: 4px;
            transition: all 0.5s ease;
        }

        .pyramid-block {
            width: 35px;
            height: 35px;
            border: 1px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .pyramid-block::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .pyramid-block:hover::before {
            opacity: 1;
        }

        .pyramid-block.level-1 { 
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            box-shadow: 0 2px 8px rgba(33,150,243,0.3);
        }
        .pyramid-block.level-2 { 
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            box-shadow: 0 2px 8px rgba(76,175,80,0.3);
        }
        .pyramid-block.level-3 { 
            background: linear-gradient(135deg, #fff3e0 0%, #ffcc02 100%);
            box-shadow: 0 2px 8px rgba(255,193,7,0.3);
        }
        .pyramid-block.level-4 { 
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
            box-shadow: 0 2px 8px rgba(233,30,99,0.3);
        }
        .pyramid-block.level-5 { 
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            box-shadow: 0 2px 8px rgba(156,39,176,0.3);
        }
        .pyramid-block.level-6 { 
            background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
            box-shadow: 0 2px 8px rgba(103,58,183,0.3);
        }

        .pyramid-level.collapse {
            transform: translateY(50px) rotate(15deg);
            opacity: 0;
        }

        /* Tooltip for pyramid blocks */
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* Professional Action Buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .action-btn {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-family: 'Segoe UI', sans-serif;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(76,175,80,0.3);
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76,175,80,0.4);
        }

        .action-btn.danger {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            box-shadow: 0 4px 15px rgba(244,67,54,0.3);
        }

        .action-btn.danger:hover {
            box-shadow: 0 6px 20px rgba(244,67,54,0.4);
        }

        .action-btn.strategy {
            background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
            box-shadow: 0 4px 15px rgba(33,150,243,0.3);
        }

        .action-btn.strategy:hover {
            box-shadow: 0 6px 20px rgba(33,150,243,0.4);
        }

        /* Sidebar Charts */
        .chart-container {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #64b5f6, #42a5f5);
        }

        .chart-title {
            color: #ffffff;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .mini-chart {
            height: 80px;
            background: linear-gradient(135deg, rgba(100,181,246,0.1) 0%, rgba(66,165,245,0.1) 100%);
            position: relative;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 8px;
            background: linear-gradient(180deg, #64b5f6 0%, #42a5f5 100%);
            transition: height 0.8s ease;
        }

        .risk-meter {
            width: 100%;
            height: 20px;
            background: linear-gradient(90deg, #4caf50 0%, #ffeb3b 50%, #f44336 100%);
            position: relative;
            overflow: hidden;
        }

        .risk-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 30px;
            background: #ffffff;
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
            transition: left 0.8s ease;
        }

        /* Professional Popups */
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(240,240,240,0.95) 100%);
            backdrop-filter: blur(20px);
            color: #333;
            padding: 30px 40px;
            border: 1px solid rgba(255,255,255,0.3);
            font-size: 16px;
            font-weight: 500;
            z-index: 100;
            text-align: center;
            animation: popupAppear 0.4s ease;
            max-width: 450px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .popup.collapse-popup {
            background: linear-gradient(135deg, rgba(244,67,54,0.95) 0%, rgba(211,47,47,0.95) 100%);
            color: white;
            font-size: 20px;
        }

        .popup.warning-popup {
            background: linear-gradient(135deg, rgba(255,193,7,0.95) 0%, rgba(255,160,0,0.95) 100%);
            color: #333;
        }

        @keyframes popupAppear {
            from {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        .restart-btn {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            font-family: 'Segoe UI', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .restart-btn:hover {
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        /* Professional Strategy popup */
        .strategy-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(240,240,240,0.95) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.3);
            padding: 30px;
            z-index: 200;
            min-width: 400px;
            animation: popupAppear 0.4s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .strategy-popup h3 {
            color: #333;
            text-align: center;
            margin: 0 0 25px 0;
            font-size: 22px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .upgrade-btn {
            display: block;
            width: 100%;
            background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
            color: white;
            border: none;
            padding: 15px 20px;
            font-family: 'Segoe UI', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            margin-bottom: 12px;
            transition: all 0.3s ease;
            text-align: left;
            box-shadow: 0 2px 8px rgba(33,150,243,0.3);
        }

        .upgrade-btn:hover {
            background: linear-gradient(135deg, #42a5f5 0%, #2196f3 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33,150,243,0.4);
        }

        .upgrade-btn.purchased {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            cursor: not-allowed;
            box-shadow: 0 2px 8px rgba(76,175,80,0.3);
        }

        .upgrade-btn.purchased:hover {
            transform: none;
        }

        .close-strategy-btn {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            font-family: 'Segoe UI', sans-serif;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            float: right;
            margin-top: 15px;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .close-strategy-btn:hover {
            background: linear-gradient(135deg, #ef5350 0%, #f44336 100%);
            transform: translateY(-2px);
        }

        /* Professional boost effect */
        .funds-boost {
            animation: professionalBlink 0.8s ease-in-out;
        }

        @keyframes professionalBlink {
            0%, 100% { 
                background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
                transform: scale(1);
            }
            50% { 
                background: linear-gradient(135deg, rgba(76,175,80,0.2) 0%, rgba(76,175,80,0.1) 100%);
                transform: scale(1.02);
                box-shadow: 0 0 20px rgba(76,175,80,0.3);
            }
        }

        /* Professional background transitions */
        .danger-mode {
            background: linear-gradient(135deg, #1e3c72 0%, #3d2a5c 100%) !important;
            transition: background 3s ease;
        }

        .critical-mode {
            background: linear-gradient(135deg, #3d2a5c 0%, #5c1e3c 100%) !important;
            transition: background 3s ease;
        }

        /* Professional Ticker Bar */
        .ticker-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(26,35,126,0.9) 100%);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(100,181,246,0.3);
            padding: 12px 0;
            z-index: 50;
            overflow: hidden;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
        }

        .ticker-content {
            display: flex;
            animation: professionalScroll 25s linear infinite;
            white-space: nowrap;
        }

        .ticker-message {
            color: rgba(255,255,255,0.9);
            font-family: 'Segoe UI', sans-serif;
            font-size: 14px;
            font-weight: 500;
            margin-right: 120px;
            flex-shrink: 0;
            padding: 0 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ticker-message.negative {
            color: #ff8a80;
        }

        .ticker-message.positive {
            color: #81c784;
        }

        .ticker-message::before {
            content: '‚óè';
            font-size: 8px;
            opacity: 0.6;
        }

        @keyframes professionalScroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* Responsive design */
        @media (max-width: 1200px) {
            .dashboard-layout {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto;
            }
            
            .sidebar {
                grid-row: 1;
            }
            
            .main-content {
                grid-row: 2;
            }
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-wrap: wrap;
                padding: 0 15px;
            }
            
            .nav-tab {
                padding: 10px 15px;
                font-size: 12px;
            }
            
            .kpi-grid {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container"><!-- Professional background pattern -->
   <div class="background-pattern"></div><!-- Header -->
   <header class="header">
    <div class="header-top">
     <div class="title" id="gameTitle">
      PONZI ARCHITECT
     </div>
     <div class="header-buttons"><button class="header-btn" onclick="closeGame()">X</button> <a href="https://pump.fun" target="_blank" rel="noopener noreferrer" class="header-btn">pump.fun</a>
     </div>
    </div>
    <nav class="nav-tabs">
     <div class="nav-tab active" onclick="switchTab('dashboard')">
      Dashboard
     </div>
     <div class="nav-tab" onclick="switchTab('investors')">
      Investors
     </div>
     <div class="nav-tab" onclick="switchTab('reports')">
      Reports
     </div>
     <div class="nav-tab" onclick="switchTab('strategies')">
      Strategies
     </div>
     <div class="nav-tab" onclick="switchTab('settings')">
      Settings
     </div>
    </nav>
   </header><!-- Main dashboard layout -->
   <main class="dashboard-layout">
    <div class="main-content"><!-- KPI Grid -->
     <div class="kpi-grid">
      <div class="kpi-card">
       <div class="kpi-label">
        Total Investors
       </div>
       <div class="kpi-value" id="totalInvestors">
        0
       </div>
       <div class="kpi-change positive" id="investorChange">
        +0% this month
       </div>
       <div class="progress-bar">
        <div class="progress-fill" id="investorProgress" style="width: 0%"></div>
       </div>
      </div>
      <div class="kpi-card">
       <div class="kpi-label">
        Funds Collected
       </div>
       <div class="kpi-value" id="fundsCollected">
        $0
       </div>
       <div class="kpi-change positive" id="fundsChange">
        +0% this month
       </div>
       <div class="progress-bar">
        <div class="progress-fill" id="fundsProgress" style="width: 0%"></div>
       </div>
      </div>
      <div class="kpi-card">
       <div class="kpi-label">
        Growth Rate
       </div>
       <div class="kpi-value" id="growthRate">
        0%
       </div>
       <div class="kpi-change positive" id="growthChange">
        Stable
       </div>
       <div class="progress-bar">
        <div class="progress-fill" id="growthProgress" style="width: 0%"></div>
       </div>
      </div>
      <div class="kpi-card">
       <div class="kpi-label">
        Approval Rating
       </div>
       <div class="kpi-value" id="approvalRating">
        100%
       </div>
       <div class="kpi-change positive" id="approvalChange">
        Excellent
       </div>
       <div class="progress-bar">
        <div class="progress-fill" id="approvalProgress" style="width: 100%"></div>
       </div>
      </div>
     </div><!-- Pyramid Visualization -->
     <div class="pyramid-panel">
      <div class="pyramid-title">
       Investor Tier Structure
      </div>
      <div class="pyramid-container" id="pyramidContainer"><!-- Pyramid levels will be added here -->
      </div>
      <div class="action-buttons"><button class="action-btn" id="recruitBtn" onclick="recruitInvestor()"> Recruit New Investor </button> <button class="action-btn strategy" onclick="showStrategyMenu()"> Strategy Upgrades </button> <button class="action-btn danger" id="withdrawBtn" onclick="withdrawFunds()"> Withdraw Funds </button>
      </div>
     </div>
    </div><!-- Sidebar with charts -->
    <div class="sidebar">
     <div class="chart-container">
      <div class="chart-title">
       Performance Metrics
      </div>
      <div class="mini-chart" id="performanceChart"><!-- Chart bars will be generated by JavaScript -->
      </div>
      <div style="font-size: 12px; color: rgba(255,255,255,0.7); margin-top: 5px;">
       Last 7 days performance trend
      </div>
     </div>
     <div class="chart-container">
      <div class="chart-title">
       Risk Assessment
      </div>
      <div class="risk-meter">
       <div class="risk-indicator" id="riskIndicator" style="left: 5%"></div>
      </div>
      <div style="font-size: 12px; color: rgba(255,255,255,0.7); margin-top: 10px; text-align: center;"><span style="color: #4caf50;">Low</span> ‚Ä¢ <span style="color: #ffeb3b;">Medium</span> ‚Ä¢ <span style="color: #f44336;">High</span>
      </div>
     </div>
     <div class="chart-container">
      <div class="chart-title">
       Market Sentiment
      </div>
      <div class="mini-chart" id="sentimentChart"><!-- Sentiment bars will be generated by JavaScript -->
      </div>
      <div style="font-size: 12px; color: rgba(255,255,255,0.7); margin-top: 5px;">
       Investor confidence levels
      </div>
     </div>
    </div>
   </main><!-- Professional Ticker bar -->
   <div class="ticker-bar">
    <div class="ticker-content" id="tickerContent"><!-- Messages will be populated by JavaScript -->
    </div>
   </div><!-- Tooltip for hover effects -->
   <div class="tooltip" id="tooltip"></div>
  </div>
  <script>
        let gameState = {
            totalInvestors: 0,
            fundsCollected: 0,
            pyramidLevels: 0,
            gameActive: true,
            warningShown: false,
            upgrades: {
                influencers: false,
                nft: false,
                audits: false
            },
            fundsMultiplier: 1,
            dangerLevel: 0
        };

        const warningMessages = [
            "‚ö†Ô∏è Authorities are investigating suspicious activity...",
            "‚ö†Ô∏è Cash flow becoming unstable...",
            "‚ö†Ô∏è Investors asking difficult questions...",
            "‚ö†Ô∏è Media attention increasing...",
            "‚ö†Ô∏è Regulatory scrutiny intensifying..."
        ];

        const tickerMessages = [
            { text: "Market confidence remains high across all investor tiers", positive: true },
            { text: "Q3 performance metrics exceed projected targets by 15%", positive: true },
            { text: "New institutional partnerships secured this quarter", positive: true },
            { text: "Regulatory compliance audit scheduled for next month", positive: true },
            { text: "Investor withdrawal request pending review", positive: false },
            { text: "Market volatility detected in emerging sectors", positive: false },
            { text: "Regulatory review pending - compliance team notified", positive: false },
            { text: "Cash flow optimization required for Q4 targets", positive: false },
            { text: "Risk assessment indicates elevated market exposure", positive: false },
            { text: "Investor relations meeting scheduled for stakeholder concerns", positive: false }
        ];

        // Default configuration
        const defaultConfig = {
            game_title: "PONZI ARCHITECT",
            recruit_button_text: "Recruit New Investor",
            collapse_message: "THE PYRAMID FALLS ‚Äì Congratulations, you're free‚Ä¶ and broke."
        };

        // Initialize professional charts
        function initializeCharts() {
            // Initialize performance chart
            const performanceChart = document.getElementById('performanceChart');
            for (let i = 0; i < 12; i++) {
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.left = `${i * 25}px`;
                bar.style.height = `${Math.random() * 60 + 20}px`;
                performanceChart.appendChild(bar);
            }

            // Initialize sentiment chart
            const sentimentChart = document.getElementById('sentimentChart');
            for (let i = 0; i < 8; i++) {
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.left = `${i * 35}px`;
                bar.style.height = `${Math.random() * 50 + 30}px`;
                bar.style.background = i < 4 ? 
                    'linear-gradient(180deg, #4caf50 0%, #45a049 100%)' : 
                    'linear-gradient(180deg, #ff9800 0%, #f57c00 100%)';
                sentimentChart.appendChild(bar);
            }
        }

        // Tab switching functionality
        function switchTab(tabName) {
            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Here you could add logic to show different content based on tab
            console.log(`Switched to ${tabName} tab`);
        }

        // Tooltip functionality
        function showTooltip(event, text) {
            const tooltip = document.getElementById('tooltip');
            tooltip.textContent = text;
            tooltip.style.opacity = '1';
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 30 + 'px';
        }

        function hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.opacity = '0';
        }

        function recruitInvestor() {
            if (!gameState.gameActive) return;

            gameState.pyramidLevels++;
            gameState.totalInvestors += gameState.pyramidLevels;
            
            // Apply upgrades multiplier
            const baseFunds = gameState.pyramidLevels * 1000;
            gameState.fundsCollected += Math.floor(baseFunds * gameState.fundsMultiplier);

            // Increase danger level
            gameState.dangerLevel += 1;
            updateBackgroundDanger();

            updateStats();
            addPyramidLevel();

            // Show blinking effect if upgrades are active
            if (gameState.fundsMultiplier > 1) {
                showFundsBoost();
            }

            // Show warning after 3+ levels
            if (gameState.pyramidLevels >= 3 && Math.random() < 0.4) {
                showWarningPopup();
            }
        }

        function addPyramidLevel() {
            const container = document.getElementById('pyramidContainer');
            const level = document.createElement('div');
            level.className = 'pyramid-level';
            
            const levelClass = `level-${Math.min(gameState.pyramidLevels, 6)}`;
            
            for (let i = 0; i < gameState.pyramidLevels; i++) {
                const block = document.createElement('div');
                block.className = `pyramid-block ${levelClass}`;
                
                // Add hover tooltip functionality
                block.addEventListener('mouseenter', (e) => {
                    const investorData = generateFakeInvestorData();
                    showTooltip(e, `Tier ${gameState.pyramidLevels} Investor: ${investorData.name} - $${investorData.investment.toLocaleString()}`);
                });
                
                block.addEventListener('mouseleave', hideTooltip);
                
                level.appendChild(block);
            }
            
            container.appendChild(level);
        }

        function generateFakeInvestorData() {
            const names = ['Alex Chen', 'Sarah Johnson', 'Michael Rodriguez', 'Emma Thompson', 'David Kim', 'Lisa Wang'];
            const investments = [5000, 10000, 25000, 50000, 100000, 250000];
            
            return {
                name: names[Math.floor(Math.random() * names.length)],
                investment: investments[Math.floor(Math.random() * investments.length)]
            };
        }

        function updateStats() {
            // Update main KPI values
            document.getElementById('totalInvestors').textContent = gameState.totalInvestors.toLocaleString();
            document.getElementById('fundsCollected').textContent = `$${gameState.fundsCollected.toLocaleString()}`;
            
            // Calculate and update growth rate
            const growthRate = Math.min(gameState.pyramidLevels * 12, 100);
            document.getElementById('growthRate').textContent = `${growthRate}%`;
            
            // Calculate approval rating (decreases with danger level)
            const approvalRating = Math.max(100 - (gameState.dangerLevel * 3), 0);
            document.getElementById('approvalRating').textContent = `${approvalRating}%`;
            
            // Update progress bars
            updateProgressBars();
            
            // Update KPI change indicators
            updateKPIChanges();
            
            // Update risk meter
            updateRiskMeter();
        }

        function updateProgressBars() {
            const investorProgress = Math.min((gameState.totalInvestors / 100) * 100, 100);
            const fundsProgress = Math.min((gameState.fundsCollected / 1000000) * 100, 100);
            const growthProgress = Math.min(gameState.pyramidLevels * 15, 100);
            const approvalProgress = Math.max(100 - (gameState.dangerLevel * 3), 0);
            
            document.getElementById('investorProgress').style.width = `${investorProgress}%`;
            document.getElementById('fundsProgress').style.width = `${fundsProgress}%`;
            document.getElementById('growthProgress').style.width = `${growthProgress}%`;
            document.getElementById('approvalProgress').style.width = `${approvalProgress}%`;
        }

        function updateKPIChanges() {
            const investorChange = document.getElementById('investorChange');
            const fundsChange = document.getElementById('fundsChange');
            const growthChange = document.getElementById('growthChange');
            const approvalChange = document.getElementById('approvalChange');
            
            if (gameState.dangerLevel > 10) {
                investorChange.textContent = '-15% this month';
                investorChange.className = 'kpi-change negative';
                fundsChange.textContent = '-8% this month';
                fundsChange.className = 'kpi-change negative';
                growthChange.textContent = 'Declining';
                growthChange.className = 'kpi-change negative';
                approvalChange.textContent = 'Critical';
                approvalChange.className = 'kpi-change negative';
            } else if (gameState.dangerLevel > 5) {
                investorChange.textContent = '+5% this month';
                investorChange.className = 'kpi-change positive';
                fundsChange.textContent = '+12% this month';
                fundsChange.className = 'kpi-change positive';
                growthChange.textContent = 'Moderate';
                growthChange.className = 'kpi-change positive';
                approvalChange.textContent = 'Good';
                approvalChange.className = 'kpi-change positive';
            } else {
                investorChange.textContent = '+25% this month';
                investorChange.className = 'kpi-change positive';
                fundsChange.textContent = '+35% this month';
                fundsChange.className = 'kpi-change positive';
                growthChange.textContent = 'Excellent';
                growthChange.className = 'kpi-change positive';
                approvalChange.textContent = 'Excellent';
                approvalChange.className = 'kpi-change positive';
            }
        }

        function updateRiskMeter() {
            const riskIndicator = document.getElementById('riskIndicator');
            const riskPercentage = Math.min((gameState.dangerLevel / 20) * 100, 95);
            riskIndicator.style.left = `${riskPercentage}%`;
        }

        function showWarningPopup() {
            if (gameState.warningShown) return;
            
            const popup = document.createElement('div');
            popup.className = 'popup warning-popup';
            popup.textContent = warningMessages[Math.floor(Math.random() * warningMessages.length)];
            
            document.body.appendChild(popup);
            gameState.warningShown = true;
            
            setTimeout(() => {
                popup.remove();
                gameState.warningShown = false;
            }, 3000);
        }

        function withdrawFunds() {
            if (!gameState.gameActive) return;
            
            gameState.gameActive = false;
            collapsePyramid();
        }

        function collapsePyramid() {
            const levels = document.querySelectorAll('.pyramid-level');
            
            levels.forEach((level, index) => {
                setTimeout(() => {
                    level.classList.add('collapse');
                }, index * 200);
            });
            
            setTimeout(() => {
                showCollapsePopup();
            }, levels.length * 200 + 500);
        }

        function showCollapsePopup() {
            const config = window.elementSdk?.config || defaultConfig;
            const popup = document.createElement('div');
            popup.className = 'popup collapse-popup';
            popup.innerHTML = `
                <div>${config.collapse_message || defaultConfig.collapse_message}</div>
                <button class="restart-btn" onclick="restartGame()">Start New Scheme</button>
            `;
            
            document.body.appendChild(popup);
        }

        function showStrategyMenu() {
            if (!gameState.gameActive) return;
            
            const popup = document.createElement('div');
            popup.className = 'strategy-popup';
            popup.innerHTML = `
                <h3>üí° Strategy Upgrades</h3>
                <button class="upgrade-btn ${gameState.upgrades.influencers ? 'purchased' : ''}" 
                        onclick="purchaseUpgrade('influencers')" 
                        ${gameState.upgrades.influencers ? 'disabled' : ''}>
                    üé≠ Hire Influencers - 2x Funds Speed ${gameState.upgrades.influencers ? '‚úì ACTIVE' : '($50K)'}
                </button>
                <button class="upgrade-btn ${gameState.upgrades.nft ? 'purchased' : ''}" 
                        onclick="purchaseUpgrade('nft')" 
                        ${gameState.upgrades.nft ? 'disabled' : ''}>
                    üñºÔ∏è Launch NFT Collection - 3x Funds Speed ${gameState.upgrades.nft ? '‚úì ACTIVE' : '($100K)'}
                </button>
                <button class="upgrade-btn ${gameState.upgrades.audits ? 'purchased' : ''}" 
                        onclick="purchaseUpgrade('audits')" 
                        ${gameState.upgrades.audits ? 'disabled' : ''}>
                    üìã Fake Security Audits - 4x Funds Speed ${gameState.upgrades.audits ? '‚úì ACTIVE' : '($200K)'}
                </button>
                <button class="close-strategy-btn" onclick="closeStrategyMenu()">Close</button>
                <div style="clear: both;"></div>
            `;
            
            document.body.appendChild(popup);
        }

        function closeStrategyMenu() {
            document.querySelectorAll('.strategy-popup').forEach(popup => popup.remove());
        }

        function purchaseUpgrade(type) {
            const costs = { influencers: 50000, nft: 100000, audits: 200000 };
            const multipliers = { influencers: 2, nft: 3, audits: 4 };
            
            if (gameState.upgrades[type] || gameState.fundsCollected < costs[type]) {
                return;
            }
            
            gameState.fundsCollected -= costs[type];
            gameState.upgrades[type] = true;
            gameState.fundsMultiplier = Math.max(gameState.fundsMultiplier, multipliers[type]);
            
            updateStats();
            closeStrategyMenu();
            
            // Show upgrade effect
            showUpgradeEffect(type);
        }

        function showUpgradeEffect(type) {
            const messages = {
                influencers: "üé≠ Influencers hired! Funds flowing faster!",
                nft: "üñºÔ∏è NFT collection launched! Hype is real!",
                audits: "üìã Fake audits published! Maximum trust achieved!"
            };
            
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.style.background = 'rgba(108, 92, 231, 0.95)';
            popup.textContent = messages[type];
            
            document.body.appendChild(popup);
            
            setTimeout(() => {
                popup.remove();
            }, 2000);
        }

        function showFundsBoost() {
            const statsElement = document.getElementById('fundsCollected').parentElement;
            statsElement.classList.add('funds-boost');
            
            setTimeout(() => {
                statsElement.classList.remove('funds-boost');
            }, 1000);
        }

        function updateBackgroundDanger() {
            const body = document.body;
            
            if (gameState.dangerLevel > 15) {
                body.classList.add('critical-mode');
                body.classList.remove('danger-mode');
            } else if (gameState.dangerLevel > 8) {
                body.classList.add('danger-mode');
                body.classList.remove('critical-mode');
            }
        }

        function initializeTicker() {
            const tickerContent = document.getElementById('tickerContent');
            
            // Create initial messages
            for (let i = 0; i < 5; i++) {
                const message = tickerMessages[Math.floor(Math.random() * tickerMessages.length)];
                const messageDiv = document.createElement('div');
                messageDiv.className = `ticker-message ${message.positive ? '' : 'negative'}`;
                messageDiv.textContent = message.text;
                tickerContent.appendChild(messageDiv);
            }
            
            // Update messages periodically
            setInterval(() => {
                updateTickerMessages();
            }, 8000);
        }

        function updateTickerMessages() {
            const tickerContent = document.getElementById('tickerContent');
            tickerContent.innerHTML = '';
            
            // Choose messages based on danger level
            const relevantMessages = gameState.dangerLevel > 10 
                ? tickerMessages.filter(msg => !msg.positive)
                : gameState.dangerLevel > 5
                ? tickerMessages
                : tickerMessages.filter(msg => msg.positive);
            
            for (let i = 0; i < 5; i++) {
                const message = relevantMessages[Math.floor(Math.random() * relevantMessages.length)];
                const messageDiv = document.createElement('div');
                messageDiv.className = `ticker-message ${message.positive ? '' : 'negative'}`;
                messageDiv.textContent = message.text;
                tickerContent.appendChild(messageDiv);
            }
        }

        function restartGame() {
            // Reset game state
            gameState = {
                totalInvestors: 0,
                fundsCollected: 0,
                pyramidLevels: 0,
                gameActive: true,
                warningShown: false,
                upgrades: {
                    influencers: false,
                    nft: false,
                    audits: false
                },
                fundsMultiplier: 1,
                dangerLevel: 0
            };
            
            // Reset background
            document.body.classList.remove('danger-mode', 'critical-mode');
            
            // Clear pyramid
            document.getElementById('pyramidContainer').innerHTML = '';
            
            // Remove any popups
            document.querySelectorAll('.popup, .strategy-popup').forEach(popup => popup.remove());
            
            // Reset ticker
            initializeTicker();
            
            // Update display
            updateStats();
        }

        function closeGame() {
            // Simple close function - in a real app this might minimize or close the window
            if (confirm('Close Ponzi Architect?')) {
                document.body.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100vh; font-family: Courier New; color: #00ff41; font-size: 24px;">Game Closed</div>';
            }
        }

        // Element SDK implementation
        async function render(config) {
            document.getElementById('gameTitle').textContent = config.game_title || defaultConfig.game_title;
            document.getElementById('recruitBtn').textContent = config.recruit_button_text || defaultConfig.recruit_button_text;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.primary_color || "#00ff41",
                        set: (value) => {
                            config.primary_color = value;
                            window.elementSdk.setConfig({ primary_color: value });
                        }
                    },
                    {
                        get: () => config.background_color || "#1a1a2e",
                        set: (value) => {
                            config.background_color = value;
                            window.elementSdk.setConfig({ background_color: value });
                        }
                    },
                    {
                        get: () => config.accent_color || "#e94560",
                        set: (value) => {
                            config.accent_color = value;
                            window.elementSdk.setConfig({ accent_color: value });
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || "Courier New",
                    set: (value) => {
                        config.font_family = value;
                        window.elementSdk.setConfig({ font_family: value });
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || 16,
                    set: (value) => {
                        config.font_size = value;
                        window.elementSdk.setConfig({ font_size: value });
                    }
                }
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["game_title", config.game_title || defaultConfig.game_title],
                ["recruit_button_text", config.recruit_button_text || defaultConfig.recruit_button_text],
                ["collapse_message", config.collapse_message || defaultConfig.collapse_message]
            ]);
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            initializeTicker();
            updateStats();
            
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    render,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
            }
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'993317f4d3a5db9f',t:'MTc2MTI0MjAwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
